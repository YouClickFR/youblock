var translations = { "en": null, "fr": null, "es": null, "de": null};
translations.en = {
    "menu_general": "General",
    "menu_blacklist": "Blacklist",
    "menu_whitelist": "Whitelist",
    "menu_personalize": "Personalize",
    
    "title_blur": "Blur:",
    "title_remove": "Remove:",
    "title_interval": "Interval:",
    "title_blockYtber": "Block following Youtubers:",
    "title_blockPhrases": "Block following Phrases:",
    "title_dontBlockYtber": "Never block following Youtubers:",
    "title_ourWhitelist": "Our Whitelist*",
    "title_able": "En-/Disable Plugin:",
    "title_lang": "Language:",
    
    "desc_score": "Clickbait-Score > ",
    "desc_interval1": "Check every ",
    "desc_interval2": " seconds",
    "desc_reload": "When navigating reload the page to prevent unwanted behaviour",
    "desc_enabled": "Enabled",
    "desc_disabled": "Disabled",
    
    "placeholder_youtuber": "YouTuber1, YouTuber2,.. (supports RegEx)",
    "placeholder_phrases": "Vlog, Prank,.. (supports RegEx)",
    
    "button_donate": "Donate",
    "button_contact": "Feedback/Contact",
    "button_credits": "Credits",
    "button_save": "Save and Reload",
    "button_design": "Design",
    
    "misc_madewith": "Made with:",
    "misc_saved": "Saved!",
    
    "misc_credit1": "<i>Huge</i> thanks to <a target='_blank' href='https://twitter.com/Ozachi_'>@Ozachi_</a> and <a target='_blank' href='https://twitter.com/SkywalkerFR'>@SkywalkerFR</a> for letting me use their service for analysing the clickbait-score of youtube videos. Check their website here: <a target='_blank' href='http://www.youclick.fr/?lang=en'>YouClick.fr</a>",
    "misc_credit2": "And also thanks a lot to my friends for the idea for this AddOn.",
    
    "misc_wedecided": "* We decided that these channels don't need to be blocked and hence we whitelisted them.",
    "misc_alsowhitelist": "Also want be whitelisted?",
    "misc_youclick": "http://www.youclick.fr/?lang=en",
    "misc_madewith": 'Made with ❤️ by&nbsp; <a target="_blank" href="https://youclick.fr/?lang=en"> YouClick</a>'
};
translations.fr = {
    "menu_general": "Général",
    "menu_blacklist": "Blacklist",
    "menu_whitelist": "Whitelist",
    "menu_personalize": "Personnaliser",
    
    "title_blur": "Flouter :",
    "title_remove": "Masquer :",
    "title_interval": "Intervalle :",
    "title_blockYtber": "Bloquer ces Youtubers :",
    "title_blockPhrases": "Bloquer ces phrases :",
    "title_dontBlockYtber": "Ne jamais bloquer ces Youtubers :",
    "title_ourWhitelist": "Notre Whitelist*",
    "title_able": "Activer/Désactiver l'extension",
    "title_lang": "Langage :",
    
    "desc_score": "Score de putaclic > ",
    "desc_interval1": "Vérification toutes les ",
    "desc_interval2": " secondes",
    "desc_reload": "Recharger la page en naviguant pour éviter les comportements imprévus",
    "desc_enabled": "Activé",
    "desc_disabled": "Désactivé",
    
    "placeholder_youtuber": "YouTuber1, YouTuber2, ... (supporte le RegEx)",
    "placeholder_phrases": "Vlog, Prank, ... (supporte le RegEx)",
    
    "button_donate": "Faire un don",
    "button_contact": "Feedback/Contact",
    "button_credits": "Crédits",
    "button_save": "Sauvegarder et Recharger",
    "button_design": "Design",
    
    "misc_madewith": "Créé avec :",
    "misc_saved": "Sauvegardé !",
    
    "misc_credit1": "Merci <i>beaucoup</i> à <a target='_blank' href='https://twitter.com/Ozachi_'>@Ozachi_</a> et <a target='_blank' href='https://twitter.com/SkywalkerFR'>@SkywalkerFR</a> pour m'avoir laissé utiliser leur service pour analyser le score de putaclic de vidéos YouTube. Jetez un œil à leur site ici : <a target='_blank' href='http://www.youclick.fr/?lang=fr'>YouClick.fr</a>",
    "misc_credit2": "Et merci aussi à mes amis pour l'idée de cette extension.",
    
    "misc_wedecided": "* Nous avons décidé que ces chaînes n'avaient pas à être bloquées et nous les avons par conséquent whitelistées.",
    "misc_alsowhitelist": "Vous voulez aussi être whitelisté ?",
    "misc_youclick": "http://www.youclick.fr/?lang=fr",
    "misc_madewith": 'Développé avec ❤️ par&nbsp; <a target="_blank" href="https://youclick.fr/?lang=fr"> YouClick</a>'
};
translations.es = {
    "menu_general": "General",
    "menu_blacklist": "Lista negra",
    "menu_whitelist": "Lista blanca",
    "menu_personalize": "Personalizar",
    
    "title_blur": "Censurar:",
    "title_remove": "Suprimir:",
    "title_interval": "Intervalo:",
    "title_blockYtber": "Bloquear estos Youtubers:",
    "title_blockPhrases": "Bloquear estas frases:",
    "title_dontBlockYtber": "Nunca bloquear estos Youtubers:",
    "title_ourWhitelist": "Nuestra Lista Blanca*",
    "title_able": "Activar/Deactivar la extensión:",
    "title_lang": "Idioma:",
    
    "desc_score": "Resultado de clickbait > ",
    "desc_interval1": "Verificación todas las ",
    "desc_interval2": " segundas",
    "desc_reload": "Recargar la página navegando para evitar los comportamientos imprevistos",
    "desc_enabled": "Activado",
    "desc_disabled": "Deactivado",
    
    "placeholder_youtuber": "YouTuber1, YouTuber2, ... (supports RegEx)",
    "placeholder_phrases": "Vlog, Prank, ... (supports RegEx)",
    
    "button_donate": "Hacer una donación",
    "button_contact": "Feedback/Contact",
    "button_credits": "Créditos",
    "button_save": "Registrar y recargar",
    "button_design": "Design",
    
    "misc_madewith": "Creado con:",
    "misc_saved": "¡Guardado!",
    
    "misc_credit1": "<i>Muchas</i> gracias a <a target='_blank' href='https://twitter.com/Ozachi_'>@Ozachi_</a> y <a target='_blank' href='https://twitter.com/SkywalkerFR'>@SkywalkerFR</a> para haberme permitido a utilizar su servicio para analizar el resultado de clickbait de videos YouTube. Mira a su sitio aquí : <a target='_blank' href='http://www.youclick.fr/?lang=es'>YouClick.fr</a>",
    "misc_credit2": "Y también gracias a mis amigos por la idea de esta extensión.",
    
    "misc_wedecided": "* Decidimos que estos canales no tenían que ser bloqueados, por eso, los pusimos en la lista blanca.",
    "misc_alsowhitelist": "¿También quieres ser en la lista blanca?",
    "misc_youclick": "http://www.youclick.fr/?lang=es",
    "misc_madewith": 'Hecho con ❤️ por&nbsp; <a target="_blank" href="https://youclick.fr/?lang=es"> YouClick</a>'
};
translations.de = {
    "menu_general": "Allgemein",
    "menu_blacklist": "Blacklist",
    "menu_whitelist": "Whitelist",
    "menu_personalize": "Personalisieren",
    
    "title_blur": "Verwischen:",
    "title_remove": "Entfernen:",
    "title_interval": "Intervall:",
    "title_blockYtber": "Folgende YouTuber blockieren:",
    "title_blockPhrases": "Folgende Wörter blockieren",
    "title_dontBlockYtber": "Folgende YouTuber nie blockieren",
    "title_ourWhitelist": "Unsere Whitelist*",
    "title_able": "Plugin De-/Aktivieren:",
    "title_lang": "Sprache:",
    
    "desc_score": "Clickbait-Score > ",
    "desc_interval1": "Prüfe alle ",
    "desc_interval2": " Sekunden",
    "desc_reload": "Wenn du eine neue Seite besucht, lade diese neu, um unerwünschtes Verhalten zu verhindern",
    "desc_enabled": "Aktiviert",
    "desc_disabled": "Deaktiviert",
    
    "placeholder_youtuber": "YouTuber1, YouTuber2,.. (unterstützt RegEx)",
    "placeholder_phrases": "Vlog, Prank,.. (unterstützt RegEx)",
    
    "button_donate": "Spenden",
    "button_contact": "Feedback/Kontakt",
    "button_credits": "Credits",
    "button_save": "Speichern und neu laden",
    "button_design": "Design",
    
    "misc_madewith": "Erstellt mit:",
    "misc_saved": "Gespeichert!",
    
    "misc_credit1": "<i>Vielen</i> Dank an <a target='_blank' href='https://twitter.com/Ozachi_'>@Ozachi_</a> und <a target='_blank' href='https://twitter.com/SkywalkerFR'>@SkywalkerFR</a>, dass sie mich ihren Service nutzen lassen, um die Clickbait-Score von Videos zu bekommen. Schaut euch ruhig mal die Website an: <a target='_blank' href='http://www.youclick.fr/?lang=de'>YouClick.fr</a>",
    "misc_credit2": "Außerdem nochmal vielen Dank an meine Freunde, die mir die Idee für das Plugin gaben.",
    
    "misc_wedecided": "* Wir haben uns entschieden, dass diese Kanäle nicht geblockt werden müssen, also haben wir sie auf die Whitelist gesetzt.",
    "misc_alsowhitelist": "Du willst auch auf der Whitelist sein?",
    "misc_youclick": "http://www.youclick.fr/?lang=de",
    "misc_madewith": 'Entwickelt mit ❤️ von&nbsp; <a target="_blank" href="https://youclick.fr/?lang=de"> YouClick</a>'
};

function translate(langcode, text){
    var length = Object.keys(translations[langcode]).length;
    for(i=0;i<length;i++){
        text = text.replace(new RegExp(Object.keys(translations[langcode])[i],"g"),translations[langcode][Object.keys(translations[langcode])[i]]);
    }
    console.log(text);
    return text;
}

function translateAll(){
    var html = document.body.innerHTML;
    var lang = localStorage.getItem("lang") || navigator.language || navigator.userLanguage;
    lang = lang.substring(0,2);
    lang = lang.toLowerCase();
    if (!Object.keys(translations).includes(lang)) lang = "en";
    html = translate(lang,html);
    document.body.innerHTML = html;
    chrome.storage.local.set({lang: lang});
}

translateAll();
